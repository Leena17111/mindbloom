<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add Assessment - MindBloom</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/common/layout.css}">
    <link rel="stylesheet" th:href="@{/css/counselor/assessment-questions.css}">
</head>

<body>
<div class="layout">

    <!-- Counselor Navbar -->
    <div th:replace="fragments/counselor-navbar :: counselor-navbar"></div>

    <main class="main-content">

        <!-- PAGE HERO (Compact like student pages) -->
        <section class="page-hero">
            <h1>Add Assessment Questions</h1>
            <p class="resource-context">
                Resource: <strong th:text="${resource.title}">Resource Title</strong>
            </p>
        </section>

        <form method="post"
              th:action="@{/counselor/resources/{id}/assessment/save(id=${resource.id})}"
              class="assessment-form">

            <!-- ================= QUESTION 1 ================= -->
            <div class="question-card">
                <div class="question-header">
                    <label class="question-label">Question 1</label>
                </div>

                <input type="text" name="question1" class="question-input"
                       placeholder="Enter your question here..."
                       th:value="${questions != null && questions.size() > 0 ? questions[0].questionText : ''}"
                       required>

                <div class="options-grid">
                    <div class="option-item">
                        <input type="radio" name="correct1" value="A" id="q1a"
                               th:checked="${questions != null && questions.size() > 0 && questions[0].correctOption == 'A'}">
                        <label for="q1a" class="option-label">Correct Answer</label>
                        <input type="text" name="option1A" class="option-input"
                               placeholder="Option A"
                               th:value="${questions != null && questions.size() > 0 ? questions[0].optionA : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct1" value="B" id="q1b"
                               th:checked="${questions != null && questions.size() > 0 && questions[0].correctOption == 'B'}">
                        <label for="q1b" class="option-label">Correct Answer</label>
                        <input type="text" name="option1B" class="option-input"
                               placeholder="Option B"
                               th:value="${questions != null && questions.size() > 0 ? questions[0].optionB : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct1" value="C" id="q1c"
                               th:checked="${questions != null && questions.size() > 0 && questions[0].correctOption == 'C'}">
                        <label for="q1c" class="option-label">Correct Answer</label>
                        <input type="text" name="option1C" class="option-input"
                               placeholder="Option C"
                               th:value="${questions != null && questions.size() > 0 ? questions[0].optionC : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct1" value="D" id="q1d"
                               th:checked="${questions != null && questions.size() > 0 && questions[0].correctOption == 'D'}">
                        <label for="q1d" class="option-label">Correct Answer</label>
                        <input type="text" name="option1D" class="option-input"
                               placeholder="Option D"
                               th:value="${questions != null && questions.size() > 0 ? questions[0].optionD : ''}"
                               required>
                    </div>
                </div>
            </div>

            <!-- ================= QUESTION 2 ================= -->
            <div class="question-card">
                <div class="question-header">
                    <label class="question-label">Question 2</label>
                </div>

                <input type="text" name="question2" class="question-input"
                       placeholder="Enter your question here..."
                       th:value="${questions != null && questions.size() > 1 ? questions[1].questionText : ''}"
                       required>

                <div class="options-grid">
                    <div class="option-item">
                        <input type="radio" name="correct2" value="A" id="q2a"
                               th:checked="${questions != null && questions.size() > 1 && questions[1].correctOption == 'A'}">
                        <label for="q2a" class="option-label">Correct Answer</label>
                        <input type="text" name="option2A" class="option-input"
                               th:value="${questions != null && questions.size() > 1 ? questions[1].optionA : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct2" value="B" id="q2b"
                               th:checked="${questions != null && questions.size() > 1 && questions[1].correctOption == 'B'}">
                        <label for="q2b" class="option-label">Correct Answer</label>
                        <input type="text" name="option2B" class="option-input"
                               th:value="${questions != null && questions.size() > 1 ? questions[1].optionB : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct2" value="C" id="q2c"
                               th:checked="${questions != null && questions.size() > 1 && questions[1].correctOption == 'C'}">
                        <label for="q2c" class="option-label">Correct Answer</label>
                        <input type="text" name="option2C" class="option-input"
                               th:value="${questions != null && questions.size() > 1 ? questions[1].optionC : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct2" value="D" id="q2d"
                               th:checked="${questions != null && questions.size() > 1 && questions[1].correctOption == 'D'}">
                        <label for="q2d" class="option-label">Correct Answer</label>
                        <input type="text" name="option2D" class="option-input"
                               th:value="${questions != null && questions.size() > 1 ? questions[1].optionD : ''}"
                               required>
                    </div>
                </div>
            </div>

            <!-- ================= QUESTION 3 ================= -->
            <div class="question-card">
                <div class="question-header">
                    <label class="question-label">Question 3</label>
                </div>

                <input type="text" name="question3" class="question-input"
                       placeholder="Enter your question here..."
                       th:value="${questions != null && questions.size() > 2 ? questions[2].questionText : ''}"
                       required>

                <div class="options-grid">
                    <div class="option-item">
                        <input type="radio" name="correct3" value="A" id="q3a"
                               th:checked="${questions != null && questions.size() > 2 && questions[2].correctOption == 'A'}">
                        <label for="q3a" class="option-label">Correct Answer</label>
                        <input type="text" name="option3A" class="option-input"
                               th:value="${questions != null && questions.size() > 2 ? questions[2].optionA : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct3" value="B" id="q3b"
                               th:checked="${questions != null && questions.size() > 2 && questions[2].correctOption == 'B'}">
                        <label for="q3b" class="option-label">Correct Answer</label>
                        <input type="text" name="option3B" class="option-input"
                               th:value="${questions != null && questions.size() > 2 ? questions[2].optionB : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct3" value="C" id="q3c"
                               th:checked="${questions != null && questions.size() > 2 && questions[2].correctOption == 'C'}">
                        <label for="q3c" class="option-label">Correct Answer</label>
                        <input type="text" name="option3C" class="option-input"
                               th:value="${questions != null && questions.size() > 2 ? questions[2].optionC : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct3" value="D" id="q3d"
                               th:checked="${questions != null && questions.size() > 2 && questions[2].correctOption == 'D'}">
                        <label for="q3d" class="option-label">Correct Answer</label>
                        <input type="text" name="option3D" class="option-input"
                               th:value="${questions != null && questions.size() > 2 ? questions[2].optionD : ''}"
                               required>
                    </div>
                </div>
            </div>

            <!-- ================= QUESTION 4 ================= -->
            <div class="question-card">
                <div class="question-header">
                    <label class="question-label">Question 4</label>
                </div>

                <input type="text" name="question4" class="question-input"
                       placeholder="Enter your question here..."
                       th:value="${questions != null && questions.size() > 3 ? questions[3].questionText : ''}"
                       required>

                <div class="options-grid">
                    <div class="option-item">
                        <input type="radio" name="correct4" value="A" id="q4a"
                               th:checked="${questions != null && questions.size() > 3 && questions[3].correctOption == 'A'}">
                        <label for="q4a" class="option-label">Correct Answer</label>
                        <input type="text" name="option4A" class="option-input"
                               th:value="${questions != null && questions.size() > 3 ? questions[3].optionA : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct4" value="B" id="q4b"
                               th:checked="${questions != null && questions.size() > 3 && questions[3].correctOption == 'B'}">
                        <label for="q4b" class="option-label">Correct Answer</label>
                        <input type="text" name="option4B" class="option-input"
                               th:value="${questions != null && questions.size() > 3 ? questions[3].optionB : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct4" value="C" id="q4c"
                               th:checked="${questions != null && questions.size() > 3 && questions[3].correctOption == 'C'}">
                        <label for="q4c" class="option-label">Correct Answer</label>
                        <input type="text" name="option4C" class="option-input"
                               th:value="${questions != null && questions.size() > 3 ? questions[3].optionC : ''}"
                               required>
                    </div>

                    <div class="option-item">
                        <input type="radio" name="correct4" value="D" id="q4d"
                               th:checked="${questions != null && questions.size() > 3 && questions[3].correctOption == 'D'}">
                        <label for="q4d" class="option-label">Correct Answer</label>
                        <input type="text" name="option4D" class="option-input"
                               th:value="${questions != null && questions.size() > 3 ? questions[3].optionD : ''}"
                               required>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="form-actions">
                <button type="submit" class="btn btn-success">
                    <i class="bi bi-check-lg me-1"></i> Save Assessment
                </button>
                <a th:href="@{/counselor/resources}" class="btn btn-outline-secondary">Cancel</a>
            </div>

        </form>

    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
