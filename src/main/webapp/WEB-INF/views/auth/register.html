<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Register - MindBloom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.min.css">

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/common/base.css}">
    <link rel="stylesheet" th:href="@{/css/auth/auth-pages.css}">
</head>

<body class="register-page">

<!-- ================= NAVBAR ================= -->
<nav class="auth-navbar">
    <div class="auth-navbar-inner">
        <a class="auth-brand" href="/">
            <!-- Using logo.png instead of brain icon -->
            <img th:src="@{/img/logo.png}" alt="MindBloom" class="auth-logo-img">
            <span class="auth-brand-text">MINDBLOOM</span>
        </a>

        <a th:href="@{/login}" class="auth-nav-btn">
            <span>Sign In</span>
            <i class="bi bi-arrow-right"></i>
        </a>
    </div>
</nav>

<!-- ================= MAIN ================= -->
<div class="auth-wrapper">
    <div class="auth-container">

        <!-- ========== LEFT: FORM ========== -->
        <div class="auth-form-side">
            <div class="auth-form-wrapper auth-form-wrapper-register">

                <!-- Header -->
                <div class="auth-header">
                    <span class="auth-welcome-badge">
                        <i class="bi bi-rocket-takeoff"></i>
                        Get started
                    </span>

                    <h1 class="auth-title">
                        Create your <span class="auth-title-brand">Account</span>
                    </h1>

                    <p class="auth-subtitle">
                        Join thousands of students on their mental wellness journey.
                    </p>
                </div>

                <!-- Form -->
                <form th:action="@{/register}" method="post" class="auth-form">

                    <!-- Error -->
                    <div th:if="${error}" class="auth-alert auth-alert-error">
                        <i class="bi bi-exclamation-circle"></i>
                        <span th:text="${error}">Error message</span>
                    </div>

                    <!-- Full Name -->
                    <div class="auth-field">
                        <label class="auth-label">
                            <i class="bi bi-person"></i>
                            Full Name
                        </label>
                        <div class="auth-input-wrapper">
                            <input type="text"
                                   name="name"
                                   class="auth-input"
                                   placeholder="John Smith"
                                   required
                                   autocomplete="name">
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="auth-field">
                        <label class="auth-label">
                            <i class="bi bi-envelope"></i>
                            Email Address
                        </label>
                        <div class="auth-input-wrapper">
                            <input type="email"
                                   name="email"
                                   class="auth-input"
                                   placeholder="john.smith@example.com"
                                   required
                                   autocomplete="email">
                        </div>
                    </div>

                    <!-- Phone + DOB -->
                    <div class="auth-field-row">
                        <div class="auth-field auth-field-half">
                            <label class="auth-label">
                                <i class="bi bi-phone"></i>
                                Phone Number
                            </label>
                            <div class="auth-input-wrapper">
                                <input type="tel"
                                       name="phone"
                                       class="auth-input"
                                       placeholder="+60 12 345 6789"
                                       required>
                            </div>
                        </div>

                        <div class="auth-field auth-field-half">
                            <label class="auth-label">
                                <i class="bi bi-calendar3"></i>
                                Date of Birth
                            </label>
                            <div class="auth-input-wrapper">
                                <input type="date"
                                       name="dob"
                                       class="auth-input"
                                       required>
                            </div>
                        </div>
                    </div>

                    <!-- Password -->
                    <div class="auth-field">
                        <label class="auth-label">
                            <i class="bi bi-lock"></i>
                            Password
                        </label>
                        <div class="auth-input-wrapper auth-input-password">
                            <input type="password"
                                   name="password"
                                   class="auth-input"
                                   placeholder="Create a strong password"
                                   required
                                   autocomplete="new-password">
                            <button type="button"
                                    class="auth-password-toggle"
                                    onclick="togglePassword(this)">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <div class="auth-password-hint">
                            <i class="bi bi-info-circle"></i>
                            Must be at least 8 characters
                        </div>
                    </div>

                    <!-- Confirm Password -->
                    <div class="auth-field">
                        <label class="auth-label">
                            <i class="bi bi-lock-fill"></i>
                            Confirm Password
                        </label>
                        <div class="auth-input-wrapper auth-input-password">
                            <input type="password"
                                   name="confirmPassword"
                                   class="auth-input"
                                   placeholder="Confirm your password"
                                   required
                                   autocomplete="new-password">
                            <button type="button"
                                    class="auth-password-toggle"
                                    onclick="togglePassword(this)">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Terms -->
                    <div class="auth-terms">
                        <label class="auth-checkbox">
                            <input type="checkbox" required>
                            <span class="auth-checkbox-mark"></span>
                            <span class="auth-checkbox-text">
                                I agree to the
                                <a href="#" class="auth-terms-link">Terms of Service</a>
                                and
                                <a href="#" class="auth-terms-link">Privacy Policy</a>
                            </span>
                        </label>
                    </div>

                    <!-- Submit -->
                    <button type="submit" class="auth-submit-btn">
                        <span>Create Account</span>
                        <i class="bi bi-arrow-right"></i>
                    </button>

                    <!-- Switch -->
                    <p class="auth-switch-text">
                        Already have an account?
                        <a th:href="@{/login}" class="auth-switch-link">Sign in here</a>
                    </p>

                </form>
            </div>
        </div>

        <!-- ========== RIGHT: BRANDING ========== -->
        <!-- Simplified to show only logo centered -->
        <div class="auth-brand-side">
            <div class="auth-brand-content">
                <img th:src="@{/img/full-logo.webp}"
                     alt="MindBloom Logo"
                     class="auth-brand-image">
            </div>
        </div>

    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function togglePassword(button) {
        const input = button.previousElementSibling;
        const icon = button.querySelector('i');

        if (input.type === 'password') {
            input.type = 'text';
            icon.classList.replace('bi-eye', 'bi-eye-slash');
        } else {
            input.type = 'password';
            icon.classList.replace('bi-eye-slash', 'bi-eye');
        }
    }
</script>

</body>
</html>
