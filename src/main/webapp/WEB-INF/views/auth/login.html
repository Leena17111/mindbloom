<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login - MindBloom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.min.css">

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/common/base.css}">
    <link rel="stylesheet" th:href="@{/css/auth/auth-pages.css}">
</head>

<body>

<!-- NAVBAR -->
<nav class="auth-navbar">
    <div class="auth-navbar-inner">
        <a class="auth-brand" href="/">
            <!-- Using logo.png instead of brain icon -->
            <img th:src="@{/img/logo.png}" alt="MindBloom" class="auth-logo-img">
            <span class="auth-brand-text">MINDBLOOM</span>
        </a>
        
        <a th:href="@{/register}" class="auth-nav-btn">
            <span>Create Account</span>
            <i class="bi bi-arrow-right"></i>
        </a>
    </div>
</nav>

<!-- MAIN WRAPPER -->
<div class="auth-wrapper">
    <div class="auth-container">

        <!-- LEFT: FORM -->
        <div class="auth-form-side">

            <div class="auth-form-card">

                <span class="auth-badge">
                    <i class="bi bi-stars"></i>
                    Welcome back
                </span>

                <h1 class="auth-title">
                    Sign in to <span class="brand-gradient">MindBloom</span>
                </h1>

                <p class="auth-subtitle">
                    Continue your journey towards better mental wellness
                </p>

                <!-- ERROR -->
                <div th:if="${error}" class="auth-alert auth-alert-error">
                    <i class="bi bi-exclamation-circle"></i>
                    <span th:text="${error}">Error message</span>
                </div>

                <!-- FORM -->
                <form th:action="@{/login}" method="post" class="auth-form">

                    <!-- EMAIL -->
                    <div class="auth-field">
                        <label class="auth-label">
                            <i class="bi bi-envelope"></i> Email Address
                        </label>
                        <input type="email"
                               name="email"
                               class="auth-input"
                               placeholder="john.smith@domain.com"
                               required>
                    </div>

                    <!-- PASSWORD -->
                    <div class="auth-field">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <label class="auth-label">
                                <i class="bi bi-lock"></i> Password
                            </label>
                            <a th:href="@{/student/forgot-password}" class="auth-forgot-link">
                                Forgot password?
                            </a>
                        </div>

                        <div class="auth-input-wrapper auth-input-password">
                            <input type="password"
                                   name="password"
                                   class="auth-input"
                                   placeholder="Enter your password"
                                   required>
                            <button type="button"
                                    class="password-toggle"
                                    onclick="togglePassword(this)">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <!-- SUBMIT -->
                    <button type="submit" class="auth-submit-btn">
                        <span>Sign In</span>
                        <i class="bi bi-arrow-right"></i>
                    </button>

                    <!-- REGISTER -->
                    <p class="auth-switch-text">
                        Don't have an account?
                        <a th:href="@{/register}" class="auth-switch-link">Create one</a>
                    </p>

                </form>
            </div>
        </div>

        <!-- RIGHT: BRANDING -->
        <!-- Simplified to show only logo centered -->
        <div class="auth-brand-side">
            <div class="auth-brand-content">
                <img th:src="@{/img/full-logo.webp}"
                     alt="MindBloom Logo"
                     class="auth-brand-image">
            </div>
        </div>
    </div>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function togglePassword(button) {
        const input = button.previousElementSibling;
        const icon = button.querySelector('i');

        if (input.type === 'password') {
            input.type = 'text';
            icon.classList.replace('bi-eye', 'bi-eye-slash');
        } else {
            input.type = 'password';
            icon.classList.replace('bi-eye-slash', 'bi-eye');
        }
    }
</script>

</body>
</html>
