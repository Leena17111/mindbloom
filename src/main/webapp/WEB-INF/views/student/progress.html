<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Progress - MindBloom</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="stylesheet" th:href="@{/css/common/base.css}">
    <link rel="stylesheet" th:href="@{/css/common/layout.css}">
    <link rel="stylesheet" th:href="@{/css/student/progress.css}">
</head>
<body>

<div class="layout">
    <div th:replace="fragments/student-navbar :: student-navbar"></div>

    <main class="main-content">
        <div class="container-fluid px-0">

            <!-- HERO (COMPACT - no breadcrumb) -->
            <section class="progress-hero">
                <div class="hero-content">
                    <div class="hero-text">
                        <h1>My Progress</h1>
                        <p>Overview of your learning journey</p>
                    </div>

                    <div class="hero-meta">
                        <div class="level-chip">
                            <i class="bi bi-star-fill"></i>
                            <span th:text="${level}">Beginner</span>
                        </div>

                        <span class="points">
                            <span th:text="${totalPoints}">0</span> points earned
                        </span>
                    </div>
                </div>
            </section>

            <!-- STATS ROW -->
            <div class="row g-4 mb-4">

                <!-- Resources Card -->
                <div class="col-lg-4 col-md-6">
                    <div class="stat-card">
                        <div class="progress-ring green">
                            <svg viewBox="0 0 120 120">
                                <circle class="ring-bg" cx="60" cy="60" r="52"/>
                                <circle class="ring-progress" cx="60" cy="60" r="52" 
                                        th:style="'--progress: ' + ${resourcesPercent}"/>
                            </svg>
                            <span class="ring-label" th:text="${resourcesPercent} + '%'">67%</span>
                        </div>

                        <div class="stat-text">
                            <h3>Completed Resources</h3>
                            <p>
                                You've completed
                                <strong th:text="${completedResources}">2</strong>
                                of
                                <strong th:text="${totalResources}">3</strong>
                                resources
                            </p>
                        </div>
                    </div>
                </div>

                <!-- In Progress Card -->
                <div class="col-lg-4 col-md-6">
                    <div class="stat-card">
                        <div class="progress-ring orange">
                            <svg viewBox="0 0 120 120">
                                <circle class="ring-bg" cx="60" cy="60" r="52"/>
                                <circle class="ring-progress" cx="60" cy="60" r="52"
                                        th:style="'--progress: ' + ${inProgressPercent}"/>
                            </svg>
                            <span class="ring-label" th:text="${inProgressPercent} + '%'">33%</span>
                        </div>

                        <div class="stat-text">
                            <h3>In Progress Resources</h3>
                            <p>
                                You've started
                                <strong th:text="${inProgressResources}">1</strong>
                                of
                                <strong th:text="${totalResources}">3</strong>
                                resources
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Assessments Card -->
                <div class="col-lg-4 col-md-6">
                    <div class="stat-card">
                        <div class="progress-ring blue">
                            <svg viewBox="0 0 120 120">
                                <circle class="ring-bg" cx="60" cy="60" r="52"/>
                                <circle class="ring-progress" cx="60" cy="60" r="52"
                                        th:style="'--progress: ' + ${assessmentsPercent}"/>
                            </svg>
                            <span class="ring-label" th:text="${assessmentsPercent} + '%'">100%</span>
                        </div>

                        <div class="stat-text">
                            <h3>Assessments</h3>
                            <p>
                                You've completed
                                <strong th:text="${completedAssessments}">1</strong>
                                of
                                <strong th:text="${totalAssessments}">1</strong>
                                assessments
                            </p>
                        </div>
                    </div>
                </div>

            </div>

            <!-- NEXT GOAL -->
            <div class="row">
                <div class="col-12">
                    <section class="next-goal-card">
                        <div class="goal-icon">
                            <i class="bi bi-trophy"></i>
                        </div>

                        <div class="goal-content">
                            <h2>Your Next Goal</h2>

                            <p th:if="${level != 'Expert'}">
                                You're at the
                                <strong th:text="${level}">Intermediate</strong> level.
                                Earn
                                <strong th:text="${
                                    level == 'Beginner' ? (10 - totalPoints) :
                                    level == 'Intermediate' ? (30 - totalPoints) :
                                    (50 - totalPoints)
                                }">20</strong>
                                more points to level up.
                            </p>

                            <p th:if="${level == 'Expert'}">
                                You've reached the highest level. Keep exploring to stay on top!
                            </p>
                        </div>
                    </section>
                </div>
            </div>

        </div>
    </main>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
