<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Reset Password</title>

    <style>
        .error { color: red; }
    </style>
</head>
<body>

<h2>Reset Password</h2>

<form th:action="@{/student/reset-password}" method="post" onsubmit="return checkMatch()">

    <!-- keep email -->
    <input type="hidden" name="email" th:value="${email}" />

    <label>New Password:</label><br>
    <input type="password" id="password" name="password" required>
    <br><br>

    <label>Confirm Password:</label><br>
    <input type="password" id="confirmPassword" name="confirmPassword" required>
    <br><br>

    <!-- show / hide -->
    <label>
        <input type="checkbox" onclick="togglePassword()"> Show Password
    </label>

    <br><br>

    <button type="submit">Reset Password</button>
</form>

<p id="msg" class="error"></p>
<p class="error" th:text="${error}"></p>

<script>
function togglePassword() {
    let p1 = document.getElementById("password");
    let p2 = document.getElementById("confirmPassword");

    let type = p1.type === "password" ? "text" : "password";
    p1.type = type;
    p2.type = type;
}

function checkMatch() {
    let p1 = document.getElementById("password").value;
    let p2 = document.getElementById("confirmPassword").value;
    let msg = document.getElementById("msg");

    if (p1 !== p2) {
        msg.innerText = "Passwords do not match";
        return false;
    }

    msg.innerText = "";
    return true;
}
</script>

</body>
</html>
